package beehive.filepile.exploit.modules;
import meteordevelopment.meteorclient.systems.modules.Module;
import meteordevelopment.meteorclient.utils.player.ChatUtils;
import net.minecraft.text.Text;
import beehive.filepile.exploit.Beehive;
import net.minecraft.entity.vehicle.BoatEntity;
import net.minecraft.network.packet.c2s.play.VehicleMoveC2SPacket;
import net.minecraft.util.math.Vec3d;

public class BoatExploit extends Module {

    public BoatExploit() {
        super(Beehive.Main, "BoatExploit", "Boat = weapon");
    }
    @Override
    public void onActivate() {
        if(!(mc.player.getVehicle() instanceof BoatEntity boat)){
            //sendClientMsg("보트에 타 있어야 합니다.");
            ChatUtils.sendMsg(Text.of("you must be on the boat."));
            toggle();
            return;
        }
        Vec3d originalPos = boat.getPos();
        boat.setPosition(originalPos.add(0, 0.05, 0));
        VehicleMoveC2SPacket groundPacket = new VehicleMoveC2SPacket(boat);
        boat.setPosition(originalPos.add(0, 20, 0));
        VehicleMoveC2SPacket skyPacket = new VehicleMoveC2SPacket(boat);
        boat.setPosition(originalPos);
        for (int i = 0; i < 20; i++){ //디폴트값:20
            mc.player.networkHandler.sendPacket(skyPacket);
            mc.player.networkHandler.sendPacket(groundPacket);
        }
        mc.player.networkHandler.sendPacket(new VehicleMoveC2SPacket(boat));
        //sendClientMsg("익스플로잇이 성공적으로 실행되었습니다.");
        ChatUtils.sendMsg(Text.of("exploit executed successfully."));

        toggle();

    }
}